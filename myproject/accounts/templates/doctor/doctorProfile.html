{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
    <h2 class="text-center mb-4">üë®‚Äç‚öïÔ∏è Doctor Profile</h2>

    {% if messages %}
        {% for message in messages %}
            <div class="alert alert-{{ message.tags }} p-2">{{ message }}</div>
        {% endfor %}
    {% endif %}
    {% if request.user.current_status == 'panding' %}
    <h2 class="text-center mb-4">Your Profile is Panding</h2>
    {% elif request.user.current_status == 'cancel' %}
    <h2 class="text-center mb-4">We are sorry! Your Application canceled</h2>
    {% if request.user.role == 'admin' or request.user == user %}
    <form method="POST" action="{% url 'deleteUser' user.id %}" style="display:inline;">
        {% csrf_token %}
        <button type="submit" class="btn btn-danger"
                onclick="return confirm('Are you sure you want to delete this account?');">
            Delete Account
        </button>
    </form>
{% endif %}   
    {% else %}
    <div class="card shadow-sm mb-4" style="max-width: 750px; margin:auto;">
        <div class="row g-0 p-3">
            <!-- Left Column: Profile Picture & Basic Info -->
            <div class="col-md-4 text-center border-end">
                {% if profile.profile_picture %}
                    <img src="{{ profile.profile_picture.url }}" class="rounded-circle mb-3" style="width:140px; height:140px; object-fit:cover;" alt="Profile Picture">
                {% else %}
                    <img src="https://via.placeholder.com/140" class="rounded-circle mb-3" alt="Profile Picture">
                {% endif %}
                <h5>{{ profile.user.get_full_name }}</h5>
                <p class="text-muted mb-1">{{ profile.user.email }}</p>
                <p class="mb-0"><strong>Contact:</strong> {{ profile.contact_number|default:"N/A" }}</p>
                <p class="mb-0"><strong>Availability:</strong> 
                    {% if profile.availability_status %}
                        <span class="text-success">Available</span>
                    {% else %}
                        <span class="text-danger">Not Available</span>
                    {% endif %}
                </p>
            </div>

            <!-- Right Column: Professional Info -->
            <div class="col-md-8 ps-4">
                <p class="mb-1"><strong>Department:</strong> {{ profile.department }}</p>
                <p class="mb-1"><strong>Specialization:</strong> {{ profile.specialization|default:"N/A" }}</p>
                <p class="mb-1"><strong>Qualification:</strong> {{ profile.qualification|default:"N/A" }}</p>
                <p class="mb-1"><strong>Experience:</strong> {{ profile.experience }} years</p>
                <p class="mb-1"><strong>Consultation Fee:</strong> ${{ profile.consultation_fee }}</p>
                {% if profile.bio %}
                    <p class="mt-3"><strong>About:</strong> {{ profile.bio }}</p>
                {% endif %}

                <a href="{% url 'doctorProfileUpdate' %}" class="btn btn-primary mt-3">‚úèÔ∏è Edit Profile</a>
            </div>
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}
